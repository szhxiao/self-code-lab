# 第 23 章 软件安装：RPM、SRPM 与 YUM 功能

## 23.1 软件管理器简介

### 23.1.1 Linux 界的两大主流；RPM 与 DPKG

| distribution 代表 | 软件管理机制 | 使用命令      | 在线升级机制 |
| ----------------- | ------------ | ------------- | ------------ |
| Red Hat/Fedora    | RPM          | rpm, rpmbuild | YUM          |
| Debian/Ubuntu     | DPKG         | dpkg          | APT          |

### 23.1.2 什么是 RPM 与 SRPM

### 23.1.3 什么是 i386, i586, i686, noarch, x86_64

### 23.1.4 RPM 的优点

-   RPM 内含已经编译过的程序与设置文件等数据，可以让用户免除重新编译的困扰
-   RPM 在被安装前会检查系统硬盘容量、操作系统版本等，避免文件被错误安装
-   RPM 文件本身提供软件版本信息、依赖属性软件名称、软件用途说明、软件所含文件等信息，便于了解软件
-   RPM 管理的方式使用数据库记录 RPM 文件的相关参数，便于升级、删除、查询与验证

## 23.2 RPM 软件管理程序：rpm

### 23.2.1 RPM 默认安装的路径

|                |                              |
| -------------- | ---------------------------- |
| /etc           | 设置文件存放目录             |
| /usr/bin       | 可执行文件                   |
| /usr/lib       | 程序使用的动态函数库         |
| /usr/share/doc | 基本的软件使用手册与帮助文档 |
| /usr/share/man | man page 文件                |

### 23.2.2 RPM 安装

> rpm -ivh package_name

参数：

-   -i install
-   -v 查看更详细的安装信息
-   -h 以安装信息栏显示安装进度

### 23.2.3 RPM 升级与更新

### 23.2.4 RPM 查询

rpm 查询时其实查询的地方是/var/lib/rpm 这个目录下的数据库文件。

> rpm -qa 已安装软件

> rpm -q[licdR] 已安装软件名称

> rpm -qf 存于系统上面的某个文件名

> rpm -qp[licdR] 未安装的某个文件名称

### 23.2.5 RPM 验证与数字证书

### 23.2.6 卸载 RPM 与重建数据库

## 23.3 SRPM 的使用：rpmbuild

### 23.3.1 利用默认值安装 SRPM 文件

### 23.3.2 SRPM 使用的路径与需要的软件

### 23.3.3 设置文件的主要内容

### 23.3.4 SRPM 的编译命令

### 23.3.5 一个打包自己软件的范例

## 23.4 YUM 在线升级机制

### 23.4.1 利用 yum 进行查询、安装、升级与删除功能

1. 查询功能

    > yum [option] [查询工作项目] [相关参数]

    [option]主要参数：

    - -y 当 yum 要等待用户输入时，这个选项可以自动提供 yes 的响应

    [查询工作项目]参数：

    - search 搜索某个软件名称或是描述的重要关键字
    - list 列出目前 yum 所管理的所有软件名称与版本
    - info
    - provides 从文件搜索软件

2. 安装/升级功能

    > yum [option] [查询工作项目] [相关参数]

    参数：

    - install 后面接要安装的软件
    - update 后面接要升级的软件，若要升级整个系统，直接 update 即可

3. 删除功能

    > yum remove pam-devel

### 23.4.2 yum 的设置文件

### 23.4.3 yum 的软件组功能

> yum [组功能] [软件组]

参数：

-   grouplist 列出所有可使用的组列表
-   groupinfo 接 group name，了解 group 内含的所有组名称
-   groupinstall 安装一整组软件
-   groupremove 删除某个组

### 23.4.4 全系统自动升级

## 23.5 管理的抉择：RPM 还是 Tarball

1. 优先选择原厂的 RPM 功能
2. 选择软件官方网站发布的 RPM 或者是提供的容器网址
3. 利用 Tarball 安装特殊软件
4. 用 Tarball 测试新版软件
