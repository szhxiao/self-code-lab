# 第 25 章 Linux 备份策略

## 25.1 备份要点

### 25.1.1 备份资料的考虑

1. 造成系统损毁的问题：硬件问题

2. 造成系统损毁的问题：软件问题

3. 主机角色不同，备份任务也不同

4. 备份因素考虑

    - 备份哪些文件
    - 选择什么备份的设备
    - 考虑备份的方式
    - 备份的频率
    - 备份使用的工具

### 25.1.2 备份哪些数据

1. 操作系统需要备份的文件
2. 网络服务的数据库方面
3. 推荐需要备份的目录

    - /boot
    - /etc
    - /home
    - /root
    - /usr/local

4. 不需要备份的目录

### 25.1.3 选择备份设备

1. 远程备份系统

2. 存储设备的考虑

## 25.2 备份的种类、频率与工具的选择

### 25.2.1 完整备份的增量备份(Incremental backup)

1. 还原的考虑
2. 增量备份原则
3. 增量备份使用的备份软件

    完整备份常用的工具有 dd, cpio, dump/restore 等。

### 25.2.2 完整备份的差异备份(differential backup)

每次备份都是与原始的完整备份比较的结果，差异备份的还原较快。

### 25.2.3 关键数据备份

## 25.3 鸟哥的备份策略

备份策略：

1. 主机硬件：使用一个独立的文件系统来存储备份数据，此文件系统挂载到/backup 中；
2. 每日进行：MySQL 数据库；
3. 每周进行：包括/home, /var, /etc, /boot, /usr/local 等目录与特殊服务的目录；
4. 自动处理：利用/etc/crontab 来自动提供备份的进行；
5. 远程备份：每月定期将数据记录到光盘上和使用网络传输到另一台机器上面。

### 25.3.1 每周系统备份的 script

### 25.3.2 每日备份数据的 script

### 25.3.3 远程备份的 script

1. 使用 FTP 上传备份数据

2. 使用 rsync 上传备份数据

## 25.4 灾难恢复的考虑
